<!-- Input Component Template -->
<!-- Usage: 
     {% include 'components/input.html' with type='text' name='email' label='Email Address' placeholder='Enter your email' required=True %}
     {% include 'components/input.html' with type='password' name='password' label='Password' error='Password is required' %}
     {% include 'components/input.html' with type='textarea' name='message' label='Message' rows=4 %}
     {% include 'components/input.html' with type='select' name='sport' label='Sport Type' options=sport_options %}
-->

<div class="input-group {{ wrapper_class|default:'' }}">
  <!-- Label -->
  {% if label %}
    <label for="{{ id|default:name }}" 
           class="block text-sm font-medium text-neutral-700 mb-2">
      {{ label }}
      {% if required %}
        <span class="text-red-500 ml-1">*</span>
      {% endif %}
    </label>
  {% endif %}

  <!-- Input wrapper for icons -->
  <div class="relative">
    <!-- Left icon -->
    {% if icon_left %}
      <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
        <svg class="h-5 w-5 text-neutral-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          {{ icon_left|safe }}
        </svg>
      </div>
    {% endif %}

    <!-- Input field -->
    {% if type == 'textarea' %}
      <textarea
        id="{{ id|default:name }}"
        name="{{ name }}"
        rows="{{ rows|default:3 }}"
        placeholder="{{ placeholder|default:'' }}"
        class="input-field textarea {{ class|default:'' }}
               {% if error %}input-error{% endif %}
               {% if success %}input-success{% endif %}
               {% if icon_left %}pl-10{% endif %}
               {% if icon_right %}pr-10{% endif %}"
        {% if required %}required{% endif %}
        {% if disabled %}disabled{% endif %}
        {% if readonly %}readonly{% endif %}
        {% if maxlength %}maxlength="{{ maxlength }}"{% endif %}
        {% if minlength %}minlength="{{ minlength }}"{% endif %}
        {% if value %}{% endif %}>{{ value|default:'' }}</textarea>
    
    {% elif type == 'select' %}
      <select
        id="{{ id|default:name }}"
        name="{{ name }}"
        class="input-field select {{ class|default:'' }}
               {% if error %}input-error{% endif %}
               {% if success %}input-success{% endif %}
               {% if icon_left %}pl-10{% endif %}
               {% if icon_right %}pr-10{% endif %}"
        {% if required %}required{% endif %}
        {% if disabled %}disabled{% endif %}
        {% if multiple %}multiple{% endif %}>
        
        {% if placeholder %}
          <option value="" disabled {% if not value %}selected{% endif %}>{{ placeholder }}</option>
        {% endif %}
        
        {% for option in options %}
          <option value="{{ option.value }}" 
                  {% if option.value == value %}selected{% endif %}
                  {% if option.disabled %}disabled{% endif %}>
            {{ option.label }}
          </option>
        {% endfor %}
      </select>
    
    {% elif type == 'checkbox' %}
      <div class="flex items-center">
        <input
          type="checkbox"
          id="{{ id|default:name }}"
          name="{{ name }}"
          value="{{ input_value|default:'1' }}"
          class="checkbox {{ class|default:'' }}
                 {% if error %}checkbox-error{% endif %}"
          {% if checked or value %}checked{% endif %}
          {% if required %}required{% endif %}
          {% if disabled %}disabled{% endif %} />
        
        {% if checkbox_label %}
          <label for="{{ id|default:name }}" class="ml-2 text-sm text-neutral-700">
            {{ checkbox_label }}
            {% if required %}
              <span class="text-red-500 ml-1">*</span>
            {% endif %}
          </label>
        {% endif %}
      </div>
    
    {% elif type == 'radio' %}
      <div class="space-y-2">
        {% for option in options %}
          <div class="flex items-center">
            <input
              type="radio"
              id="{{ id|default:name }}_{{ forloop.counter }}"
              name="{{ name }}"
              value="{{ option.value }}"
              class="radio {{ class|default:'' }}
                     {% if error %}radio-error{% endif %}"
              {% if option.value == value %}checked{% endif %}
              {% if required and forloop.first %}required{% endif %}
              {% if disabled or option.disabled %}disabled{% endif %} />
            
            <label for="{{ id|default:name }}_{{ forloop.counter }}" class="ml-2 text-sm text-neutral-700">
              {{ option.label }}
            </label>
          </div>
        {% endfor %}
      </div>
    
    {% elif type == 'file' %}
      <input
        type="file"
        id="{{ id|default:name }}"
        name="{{ name }}"
        class="input-field file {{ class|default:'' }}
               {% if error %}input-error{% endif %}"
        {% if accept %}accept="{{ accept }}"{% endif %}
        {% if multiple %}multiple{% endif %}
        {% if required %}required{% endif %}
        {% if disabled %}disabled{% endif %} />
    
    {% else %}
      <!-- Default text/email/password/number/date inputs -->
      <input
        type="{{ type|default:'text' }}"
        id="{{ id|default:name }}"
        name="{{ name }}"
        value="{{ value|default:'' }}"
        placeholder="{{ placeholder|default:'' }}"
        class="input-field {{ class|default:'' }}
               {% if error %}input-error{% endif %}
               {% if success %}input-success{% endif %}
               {% if icon_left %}pl-10{% endif %}
               {% if icon_right %}pr-10{% endif %}"
        {% if required %}required{% endif %}
        {% if disabled %}disabled{% endif %}
        {% if readonly %}readonly{% endif %}
        {% if maxlength %}maxlength="{{ maxlength }}"{% endif %}
        {% if minlength %}minlength="{{ minlength }}"{% endif %}
        {% if min %}min="{{ min }}"{% endif %}
        {% if max %}max="{{ max }}"{% endif %}
        {% if step %}step="{{ step }}"{% endif %}
        {% if pattern %}pattern="{{ pattern }}"{% endif %}
        {% if autocomplete %}autocomplete="{{ autocomplete }}"{% endif %} />
    {% endif %}

    <!-- Right icon -->
    {% if icon_right %}
      <div class="absolute inset-y-0 right-0 pr-3 flex items-center">
        <svg class="h-5 w-5 text-neutral-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          {{ icon_right|safe }}
        </svg>
      </div>
    {% endif %}

    <!-- Password toggle button -->
    {% if type == 'password' and show_toggle %}
      <button type="button" 
              class="absolute inset-y-0 right-0 pr-3 flex items-center password-toggle"
              onclick="togglePassword('{{ id|default:name }}')">
        <svg class="h-5 w-5 text-neutral-400 eye-open" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
        </svg>
        <svg class="h-5 w-5 text-neutral-400 eye-closed hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"></path>
        </svg>
      </button>
    {% endif %}
  </div>

  <!-- Help text -->
  {% if help_text %}
    <p class="mt-1 text-sm text-neutral-600">{{ help_text }}</p>
  {% endif %}

  <!-- Error message -->
  {% if error %}
    <p class="mt-1 text-sm text-red-600 flex items-center">
      <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 15.5c-.77.833.192 2.5 1.732 2.5z"></path>
      </svg>
      {{ error }}
    </p>
  {% endif %}

  <!-- Success message -->
  {% if success %}
    <p class="mt-1 text-sm text-green-600 flex items-center">
      <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
      </svg>
      {{ success }}
    </p>
  {% endif %}
</div>

<style>
  /* Base input styles */
  .input-field {
    width: 100%;
    border: 1px solid #e2e8f0;
    border-radius: 0.75rem;
    padding: 0.625rem 1rem;
    font-size: 0.875rem;
    line-height: 1.25;
    color: #1e293b;
    background-color: #ffffff;
    transition: border-color 0.2s, box-shadow 0.2s, background-color 0.2s;
  }
  
  .input-field::placeholder {
    color: #94a3b8;
  }
  
  .input-field:focus {
    outline: none;
    border-color: #4E71FF;
    box-shadow: 0 0 0 3px rgba(78, 113, 255, 0.1);
    background-color: #ffffff;
  }
  
  .input-field:disabled {
    background-color: #f1f5f9;
    color: #94a3b8;
    cursor: not-allowed;
  }
  
  .input-field:read-only {
    background-color: #f8fafc;
    color: #64748b;
  }
  
  /* Textarea specific */
  .textarea {
    resize: vertical;
    min-height: 2.5rem;
  }
  
  /* Select specific */
  .select {
    cursor: pointer;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 0.5rem center;
    background-repeat: no-repeat;
    background-size: 1.5em 1.5em;
    padding-right: 2.5rem;
  }
  
  /* File input specific */
  .file {
    padding: 0.5rem;
    border: 2px dashed #cbd5e1;
    background-color: #f8fafc;
  }
  
  .file:hover {
    border-color: #4E71FF;
    background-color: #f0f5ff;
  }
  
  /* Checkbox styles */
  .checkbox {
    width: 1rem;
    height: 1rem;
    border: 1px solid #d1d5db;
    border-radius: 0.25rem;
    background-color: #ffffff;
    cursor: pointer;
    transition: border-color 0.2s, background-color 0.2s;
  }
  
  .checkbox:checked {
    background-color: #4E71FF;
    border-color: #4E71FF;
    background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='m13.854 3.646-7.5 7.5a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6 10.293l7.146-7.147a.5.5 0 0 1 .708.708z'/%3e%3c/svg%3e");
  }
  
  .checkbox:focus {
    outline: none;
    box-shadow: 0 0 0 3px rgba(78, 113, 255, 0.1);
  }
  
  /* Radio styles */
  .radio {
    width: 1rem;
    height: 1rem;
    border: 1px solid #d1d5db;
    border-radius: 50%;
    background-color: #ffffff;
    cursor: pointer;
    transition: border-color 0.2s, background-color 0.2s;
  }
  
  .radio:checked {
    background-color: #4E71FF;
    border-color: #4E71FF;
    background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3ccircle cx='8' cy='8' r='3'/%3e%3c/svg%3e");
  }
  
  .radio:focus {
    outline: none;
    box-shadow: 0 0 0 3px rgba(78, 113, 255, 0.1);
  }
  
  /* Error states */
  .input-error {
    border-color: #ef4444;
    background-color: #fef2f2;
  }
  
  .input-error:focus {
    border-color: #ef4444;
    box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);
  }
  
  .checkbox-error,
  .radio-error {
    border-color: #ef4444;
  }
  
  /* Success states */
  .input-success {
    border-color: #10b981;
    background-color: #f0fdf4;
  }
  
  .input-success:focus {
    border-color: #10b981;
    box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
  }
  
  /* Hover states */
  .input-field:hover:not(:disabled):not(:read-only) {
    border-color: #cbd5e1;
  }
  
  .checkbox:hover:not(:disabled),
  .radio:hover:not(:disabled) {
    border-color: #4E71FF;
  }
</style>

<script>
  // Password toggle functionality
  function togglePassword(inputId) {
    const input = document.getElementById(inputId);
    const button = input.nextElementSibling;
    const eyeOpen = button.querySelector('.eye-open');
    const eyeClosed = button.querySelector('.eye-closed');
    
    if (input.type === 'password') {
      input.type = 'text';
      eyeOpen.classList.add('hidden');
      eyeClosed.classList.remove('hidden');
    } else {
      input.type = 'password';
      eyeOpen.classList.remove('hidden');
      eyeClosed.classList.add('hidden');
    }
  }
  
  // Auto-resize textarea
  document.addEventListener('DOMContentLoaded', function() {
    const textareas = document.querySelectorAll('.textarea');
    textareas.forEach(textarea => {
      textarea.addEventListener('input', function() {
        this.style.height = 'auto';
        this.style.height = this.scrollHeight + 'px';
      });
    });
  });
</script>