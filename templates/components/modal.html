<!-- Modal Component Template -->
<!-- Usage: 
     {% include 'components/modal.html' with id='my-modal' title='Modal Title' content='Modal content' %}
-->

<div
  id="{{ id|default:'modal' }}"
  class="modal-overlay fixed inset-0 bg-black bg-opacity-50 z-50 hidden items-center justify-center p-4"
>
  <div
    class="modal-container bg-white rounded-2xl shadow-strong max-w-{{ size|default:'md' }} w-full max-h-[90vh] overflow-hidden"
  >
    <!-- Modal Header -->
    {% if title %}
    <div
      class="modal-header flex items-center justify-between p-6 border-b border-neutral-200"
    >
      <h3 class="text-xl font-display font-semibold text-neutral-900">
        {{ title }}
      </h3>
      <button
        type="button"
        class="modal-close text-neutral-400 hover:text-neutral-600 transition-colors"
        onclick="closeModal('{{ id|default:'modal' }}')"
      >
        <svg
          class="w-6 h-6"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M6 18L18 6M6 6l12 12"
          ></path>
        </svg>
      </button>
    </div>
    {% endif %}

    <!-- Modal Body -->
    <div class="modal-body p-6 {{ body_class|default:'' }} overflow-y-auto">
      {% if content %} {{ content|safe }} {% endif %}
    </div>

    <!-- Modal Footer -->
    {% if actions or footer %}
    <div
      class="modal-footer flex items-center justify-end space-x-3 p-6 border-t border-neutral-200 bg-neutral-50"
    >
      {% if actions %} {% for action in actions %} {% include
      'components/button.html' with type=action.type text=action.text
      onclick=action.onclick size='sm' %} {% endfor %} {% endif %} {% if footer
      %} {{ footer|safe }} {% endif %}
    </div>
    {% endif %}
  </div>
</div>

<style>
  /* Modal styles */
  .modal-overlay {
    backdrop-filter: blur(4px);
    transition: opacity 0.3s ease;
  }

  .modal-overlay.show {
    display: flex;
  }

  .modal-container {
    transform: scale(0.95);
    transition: transform 0.3s ease;
  }

  .modal-overlay.show .modal-container {
    transform: scale(1);
  }

  /* Modal sizes */
  .max-w-sm {
    max-width: 24rem;
  }
  .max-w-md {
    max-width: 28rem;
  }
  .max-w-lg {
    max-width: 32rem;
  }
  .max-w-xl {
    max-width: 36rem;
  }
  .max-w-2xl {
    max-width: 42rem;
  }
  .max-w-3xl {
    max-width: 48rem;
  }
  .max-w-4xl {
    max-width: 56rem;
  }
  .max-w-5xl {
    max-width: 64rem;
  }
</style>

<script>
  // Modal functions
  function openModal(modalId) {
    const modal = document.getElementById(modalId);
    if (modal) {
      modal.classList.remove("hidden");
      modal.classList.add("show");
      document.body.style.overflow = "hidden";
    }
  }

  function closeModal(modalId) {
    const modal = document.getElementById(modalId);
    if (modal) {
      modal.classList.remove("show");
      setTimeout(() => {
        modal.classList.add("hidden");
        document.body.style.overflow = "";
      }, 300);
    }
  }

  // Close modal when clicking outside
  document.addEventListener("click", function (e) {
    if (e.target.classList.contains("modal-overlay")) {
      const modalId = e.target.id;
      closeModal(modalId);
    }
  });

  // Close modal with Escape key
  document.addEventListener("keydown", function (e) {
    if (e.key === "Escape") {
      const openModal = document.querySelector(".modal-overlay.show");
      if (openModal) {
        closeModal(openModal.id);
      }
    }
  });
</script>
